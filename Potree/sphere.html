<html>
<head>

<link rel="stylesheet" type="text/css" href="resources/style/potree.css" />
<script type="text/javascript" src="config.js"></script>

<script type="text/javascript" src="src/Potree.js"></script>
<script type="text/javascript" >Potree.importScripts("./");</script>

<script type="text/javascript">

function init() {
	Potree.useDebugContext = false;
	var success = Potree.init($('canvas'));
	if(!success){
		return;
	}
	
	var scene = Potree.currentScene;	
	var cam = scene.activeCamera;
	cam.translate(0,1,10);
	cam.rotateX(-Math.PI/8);
	$('canvas').focus();
	
	
// 	var light1 = new Light("light1", scene.rootNode);
// 	light1.translate(0,6,12);
// 	light1.colour = [0, 1, 0];
// 	light1.castShadows = true;
	
// 	var light2 = new Light("light2", scene.rootNode);
// 	light2.translate(-12,6,-12);
// 	light2.colour = [1, 0, 0];
// // 	light2.castShadows = true;

// 	var light3 = new Light("light3", scene.rootNode);
// 	light3.translate(12,6,-12);
// 	light3.colour = [0, 0, 1];
// // 	light3.castShadows = true;


	var sphere = new Sphere("sphere1", scene.rootNode);
	sphere.translate(0,1,0);
	
	var sphere = new Sphere("sphere2", scene.rootNode);
	sphere.translate(2,1,0);
	
	var sphere = new Sphere("sphere3", scene.rootNode);
	sphere.translate(1,1,2);
	
	var sphere = new Sphere("sphere4", scene.rootNode);
	sphere.scale(0.8,0.8,0.8);
	sphere.translate(1,2.2,1);

	var plane = new Plane("plane1", scene.rootNode);
	plane.scale(50,1,50);

	{ // spot
		var pointer = new SceneNode("pointer", scene.rootNode);
		var head = new Sphere("pHead", pointer);
		head.scale(0.2, 0.2, 0.2);
		head.translate(0,0,-1);
		
		var shaft = new Sphere("pShaft", pointer);
		shaft.scale(0.1, 0.1, 1.0);
		
		var spotLight = new Light("spotLight", head);
// 		spotLight.translate(10,10,6);
// 		spotLight.lookAt(0,0,0);
		spotLight.type = LightType.SPOT;
// 		spotLight.colour = [ 0, 1, 0];
// 		spotLight.castShadows = true;

		pointer.translate(12, 12, 0);
		pointer.lookAt(V3.$(0, 0, 0));
	}
	
// 	alight1 = light2;
// 	alight2 = light3;
// 	alight3 = light1;
	setInterval(moveLight, 10);
}

var alight = null;
function moveLight(){
// 	alight1.rotateY(0.01);
// 	alight2.rotateY(0.01);
// 	alight3.rotateY(0.01);
}

</script>
    
</head>
 <body onload="init()" class="claro">

	<div id="workarea" style="width: 100%; height: 100%">
		<canvas id="canvas" width="800" height="600" tabIndex="1">
			Your Browser does not support WebGL. Try the newest version of Firefox or Google Chrome.
		</canvas>
	</div>
	
</body>
</html>